<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NTCU 實境功德地圖</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background: #f8fafc; }
        .map-container {
            position: relative; width: 100%; height: 600px; background-color: #e2e8f0;
            background-image: url('https://i.ibb.co/DPQm11wf/1.png');
            background-size: contain; background-position: center; background-repeat: no-repeat;
            border-radius: 2.5rem; cursor: crosshair; overflow: hidden;
            border: 8px solid white; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .shape-box { position: absolute; transform-origin: center center; display: flex; align-items: center; justify-content: center; pointer-events: none; }
        .shape-box::after { content: ''; position: absolute; inset: 0; box-sizing: border-box; }
        .existing-area-admin::after { border: 2px dashed rgba(139, 92, 246, 0.5); background: rgba(139, 92, 246, 0.1); pointer-events: auto; }
        .temp-box::after { border: 2px dashed #fbbf24 !important; background: rgba(251, 191, 36, 0.1) !important; pointer-events: auto; }
        .s-rect::after { border-radius: 0; }
        .s-ellipse::after { border-radius: 50%; }
        
        /* 縮放手把視覺 */
        .resize-handle {
            position: absolute; width: 14px; height: 14px; background: white; 
            border: 2px solid #4f46e5; border-radius: 4px; bottom: -7px; right: -7px; 
            cursor: nwse-resize; pointer-events: auto !important; z-index: 100;
        }

        .tool-btn { @apply px-3 py-
